<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BitDark Blog</title>
  <meta name="description" content="Practical guides on privacy-first tools, secure digital workflows, encryption, anonymous online habits, and digital safety practices for everyday users." />

  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://bitdark.net/blog/" />

  <style>
    :root{
      --bg:#ffffff; --fg:#111827; --muted:#6b7280; --line:#e5e7eb;
      --card:#ffffff; --shadow: 0 1px 2px rgba(0,0,0,.06);
      --link:#1a73e8; --chip:#f3f4f6; --chipfg:#374151; --chipon:#111827;
    }
    html[data-theme="dark"]{
      --bg:#0b0f1a; --fg:#e5e7eb; --muted:#9ca3af; --line:#1f2937;
      --card:#0f1626; --shadow: 0 1px 2px rgba(0,0,0,.35);
      --link:#8ab4f8; --chip:#111827; --chipfg:#9ca3af; --chipon:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font: 16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
    }
    a{color:var(--link); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:980px; margin:0 auto; padding:18px 16px 70px}

    .topbar{
      position:sticky; top:0; z-index:10;
      background:color-mix(in srgb, var(--bg) 92%, transparent);
      backdrop-filter:saturate(180%) blur(10px);
      border-bottom:1px solid var(--line);
    }
    .topbar .inner{
      max-width:980px; margin:0 auto;
      padding:10px 16px;
      display:flex; align-items:center; gap:12px;
    }
    .brand{display:flex; align-items:baseline; gap:10px; flex-wrap:wrap; min-width:190px}
    .brand b{font-size:16px}
    .brand span{color:var(--muted); font-size:12px}
    .navlinks{display:flex; gap:14px; flex-wrap:wrap; align-items:center}
    .navlinks a{font-size:13px; color:var(--muted)}
    .navlinks a:hover{color:var(--fg); text-decoration:none}
    .searchbar{flex:1; display:flex; justify-content:flex-end}
    .searchWrap{position:relative; width:min(520px, 100%)}
    .searchWrap input{
      width:100%;
      padding:10px 12px 10px 36px;
      border:1px solid var(--line);
      border-radius:14px;
      background:var(--bg);
      color:var(--fg);
      outline:none;
    }
    .searchWrap svg{position:absolute; left:12px; top:50%; transform:translateY(-50%); opacity:.55}
    .btn{
      border:1px solid var(--line); background:var(--card); color:var(--fg);
      padding:8px 10px; border-radius:12px; cursor:pointer; box-shadow:var(--shadow);
      font-size:13px;
    }

    .hero{
      margin-top:16px;
      border:1px solid var(--line);
      background:var(--card);
      border-radius:18px;
      padding:16px;
      box-shadow:var(--shadow);
    }
    .hero h1{margin:0 0 6px; font-size:22px}
    .hero p{margin:0; color:var(--muted)}

    .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .chip{
      border:1px solid var(--line);
      background:var(--chip);
      color:var(--chipfg);
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .chip[aria-pressed="true"]{
      color:var(--chipon);
      border-color:color-mix(in srgb, var(--link) 28%, var(--line));
      box-shadow:0 1px 0 rgba(0,0,0,.03);
    }

    .list{margin-top:14px; display:grid; gap:12px}
    .post{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:18px;
      padding:14px 16px;
      box-shadow:var(--shadow);
    }
    .post h2{margin:0 0 6px; font-size:18px}
    .meta{display:flex; gap:10px; flex-wrap:wrap; color:var(--muted); font-size:12px}
    .excerpt{margin:10px 0 0; color:var(--muted)}
    .tagsInline{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap}
    .tag{
      border:1px solid var(--line); background:var(--chip);
      padding:4px 8px; border-radius:999px; font-size:12px; color:var(--muted);
    }

    .empty{
      display:none; margin-top:12px; color:var(--muted);
      border:1px dashed var(--line); border-radius:14px; padding:12px;
    }

    footer{
      margin-top:26px;
      border-top:1px solid var(--line);
      padding-top:12px;
      color:var(--muted);
      font-size:12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
    }
    .footRight{margin-left:auto; display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .footRight a{color:var(--muted)}
    .footRight a:hover{color:var(--fg); text-decoration:none}

    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px; padding:2px 6px; border-radius:6px; border:1px solid var(--line);
      background:var(--chip); color:var(--muted);
    }

    .loading{
      margin-top:12px;
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background:var(--card);
      color:var(--muted);
      box-shadow:var(--shadow);
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="inner">
      <div class="brand">
        <b><a href="/" aria-label="BitDark Home">BitDark</a></b>
        <span><a href="/blog/index.html">Blog</a></span>
      </div>

      <div class="searchbar" role="search">
        <div class="searchWrap">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35m1.85-5.15a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <input id="q" type="search" placeholder="Search: yubikey, gmail, outlook, email encryption, pdf signing…" autocomplete="off">
        </div>
      </div>

      <button class="btn" id="themeBtn" type="button" title="Toggle light/dark">Theme</button>
    </div>
  </div>

  <div class="wrap">
    <section class="hero">
      <h1>Practical Privacy-First Tools, Secure Digital Workflows & Safety Guides</h1>
        <p class="subhead"><b>Encryption, privacy habits, anonymous workflows, and digital safety practices for everyday users</b></p>

      
      <div class="chips" id="tagChips" aria-label="Filter by tag"></div>

      <div style="margin-top:10px; color:var(--muted); font-size:12px">
        Tip: press <span class="kbd">Ctrl</span> <span class="kbd">K</span> to jump to search.
      </div>
    </section>

    <div class="loading" id="loadingBox">Loading posts…</div>

    <main class="list" id="postList"></main>

    <div class="empty" id="emptyState">
      No matches. Try: <b>gmail</b>, <b>outlook</b>, <b>email</b>, <b>yubikey</b>, <b>kleopatra</b>, <b>pdf</b>.
    </div>

    <footer>
      <div>© <span id="year"></span> BitDark.NET</div>
      <div class="footRight">
        <a href="/blog/index.html">Blog</a>
        <a href="/about.html">About</a>
        <a href="/privacy.html">Privacy</a>
        <a href="/terms.html">Terms</a>
        <a href="/faq.html">FAQ</a>
      </div>
    </footer>
  </div>

  <script>
    const SYN = new Map([
      ["email", ["mail","gmail","outlook","protonmail","inbox"]],
      ["mail", ["email","gmail","outlook","protonmail"]],
      ["gmail", ["email","mail","outlook"]],
      ["outlook", ["email","mail","gmail"]],
      ["cloud", ["drive","google drive","onedrive","dropbox","storage"]],
      ["encrypt", ["encryption","encrypted","pgp","gpg","openpgp"]],
      ["pgp", ["openpgp","gpg","encryption","encrypt"]],
      ["gpg", ["openpgp","pgp","kleopatra","gpg4win"]],
      ["kleopatra", ["gpg4win","gpg","openpgp","pgp"]],
      ["yubikey", ["security key","hardware key","2fa key","fido","webauthn"]],
      ["pdf", ["document","sign pdf","pdf signing","signature"]],
    ]);

    function tokenize(s){
      return (s||"")
        .toLowerCase()
        .replace(/[^\p{L}\p{N}\s-]/gu, " ")
        .split(/\s+/).filter(Boolean);
    }
    function expandTerms(terms){
      const out = new Set(terms);
      for (const t of terms){
        const extras = SYN.get(t);
        if (extras) extras.forEach(x => tokenize(x).forEach(y => out.add(y)));
      }
      return Array.from(out);
    }
    function escapeHTML(s){
      return String(s||"")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function sortByUpdatedDesc(a,b){
      return (b.updated || "").localeCompare(a.updated || "");
    }

    (function () {
      const root = document.documentElement;
      const saved = localStorage.getItem("bd_blog_theme");
      if (saved === "dark" || saved === "light") root.setAttribute("data-theme", saved);

      document.getElementById("themeBtn").addEventListener("click", () => {
        const cur = root.getAttribute("data-theme") || "light";
        const next = cur === "dark" ? "light" : "dark";
        root.setAttribute("data-theme", next);
        localStorage.setItem("bd_blog_theme", next);
      });

      const input = document.getElementById("q");
      document.addEventListener("keydown", (e) => {
        if ((e.ctrlKey || e.metaKey) && (e.key || "").toLowerCase() === "k") {
          e.preventDefault();
          input.focus();
        }
      });

      document.getElementById("year").textContent = new Date().getFullYear();
    })();

    function renderPostCard(post){
      const updatedPretty = post.updated && post.updated !== "1970-01-01"
        ? new Date(post.updated + "T00:00:00").toLocaleDateString(undefined, { year:"numeric", month:"short", day:"2-digit" })
        : "—";

      const tagHTML = (post.tags||[]).slice(0,6).map(t => `<span class="tag">${escapeHTML(t)}</span>`).join("");

      return `
        <article class="post"
          data-category="${escapeHTML(post.category || "General")}"
          data-tags="${escapeHTML((post.tags||[]).join(","))}"
          data-keywords="${escapeHTML(post.keywords || "")}">
          <h2><a href="/blog/${escapeHTML(post.slug)}/" rel="bookmark">${escapeHTML(post.title)}</a></h2>
          <div class="meta">
            <span>Updated: <time datetime="${escapeHTML(post.updated)}">${escapeHTML(updatedPretty)}</time></span>
            <span>•</span>
            <span>Category: ${escapeHTML(post.category || "General")}</span>
          </div>
          <p class="excerpt">${escapeHTML(post.description || "Practical guide from BitDark.NET.")}</p>
          <div class="tagsInline">${tagHTML}</div>
        </article>
      `;
    }

    function buildTagChips(allTags){
      const container = document.getElementById("tagChips");
      container.innerHTML = "";
      const sorted = Array.from(allTags).sort((a,b)=>a.localeCompare(b));
      const prefer = ["privacy","email","cloud","yubikey","kleopatra","pdf","error-fix","windows","openpgp","gpg"];
      const final = [
        ...prefer.filter(t => sorted.includes(t)),
        ...sorted.filter(t => !prefer.includes(t))
      ].slice(0, 14);

      final.forEach(t => {
        const el = document.createElement("span");
        el.className = "chip";
        el.setAttribute("data-tag", t);
        el.setAttribute("aria-pressed", "false");
        el.textContent = t.replace(/-/g," ").replace(/\b\w/g, c => c.toUpperCase());
        container.appendChild(el);
      });
    }

    function applyFilters(){
      const q = document.getElementById("q");
      const posts = Array.from(document.querySelectorAll("#postList .post"));
      const empty = document.getElementById("emptyState");
      const chips = Array.from(document.querySelectorAll("#tagChips .chip"));
      let activeTags = new Set();

      function passesTags(post){
        if (activeTags.size === 0) return true;
        const tags = (post.getAttribute("data-tags") || "").toLowerCase().split(",").map(s=>s.trim()).filter(Boolean);
        return Array.from(activeTags).every(t => tags.includes(t));
      }

      function filter(){
        const raw = q.value.trim();
        const baseTerms = tokenize(raw);
        const terms = expandTerms(baseTerms);

        let shown = 0;
        posts.forEach(p => {
          const title = (p.querySelector("h2")?.innerText || "").toLowerCase();
          const cat = (p.getAttribute("data-category") || "").toLowerCase();
          const keys = (p.getAttribute("data-keywords") || "").toLowerCase();
          const combined = `${title} ${cat} ${keys}`;

          const okText = terms.length === 0
            || baseTerms.every(t => combined.includes(t))
            || terms.some(t => combined.includes(t));

          const ok = okText && passesTags(p);
          p.style.display = ok ? "" : "none";
          if (ok) shown++;
        });

        empty.style.display = shown === 0 ? "block" : "none";
      }

      chips.forEach(chip => {
        chip.addEventListener("click", () => {
          const tag = (chip.getAttribute("data-tag") || "").toLowerCase();
          const pressed = chip.getAttribute("aria-pressed") === "true";
          chip.setAttribute("aria-pressed", String(!pressed));
          if (!pressed) activeTags.add(tag); else activeTags.delete(tag);
          filter();
        });
      });

      q.addEventListener("input", filter);

      const params = new URLSearchParams(location.search);
      const pre = params.get("q");
      if (pre) q.value = pre;

      filter();
    }

    function renderAll(posts){
      const list = document.getElementById("postList");
      const allTags = new Set();

      list.innerHTML = posts.map(p => {
        (p.tags || []).forEach(t => allTags.add(String(t).toLowerCase()));
        allTags.add(String(p.category || "General").toLowerCase().replace(/\s+/g,"-"));
        return renderPostCard(p);
      }).join("");

      buildTagChips(allTags);
      applyFilters();
    }

    async function loadPosts(){
      const loading = document.getElementById("loadingBox");
      try{
        // cache-bust so "latest post" appears immediately after push
        const res = await fetch("/blog/posts.json?ts=" + Date.now());
        if(!res.ok) throw new Error("posts.json missing");
        const posts = await res.json();
        posts.sort(sortByUpdatedDesc);
        renderAll(posts);
        loading.style.display = "none";
      }catch(err){
        loading.textContent = "Could not load /blog/posts.json (create GitHub Action below).";
        console.error(err);
      }
    }

    loadPosts();
  </script>
</body>
</html>
