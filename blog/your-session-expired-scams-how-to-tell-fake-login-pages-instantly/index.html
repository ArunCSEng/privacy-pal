<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>“Your Session Expired” Scams: How to Tell Fake Login Pages Instantly — BitDark Blog</title>
  <meta name="description" content="Learn how to spot fake 'Session Expired' login pages instantly using domain-first checks, URL patterns, form behavior clues, and device-safe steps—privacy-first, client-only mindset. Includes real-world examples and what to do if you already entered details." />
  <link rel="canonical" href="https://bitdark.net/blog/session-expired-scam-fake-login-pages/" />

  <meta name="bd:category" content="Safe-Link Tips" />
  <meta name="bd:tags" content="session-expired,fake-login,phishing-signs,domain-check,url-inspection,client-only,privacy-first,2fa,passkeys,otp,bank-scams,google-microsoft-apple" />
  <meta name="bd:updated" content="2025-12-27" />

  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#ffffff; --fg:#111827; --muted:#6b7280; --line:#e5e7eb;
      --card:#ffffff; --shadow:0 1px 2px rgba(0,0,0,.06);
      --link:#1a73e8; --chip:#f3f4f6;
      --code:#0b1020; --codefg:#e5e7eb;
      --ok:#16a34a; --warn:#ef4444; --info:#2563eb;
    }
    html[data-theme="dark"]{
      --bg:#0b0f1a; --fg:#e5e7eb; --muted:#9ca3af; --line:#1f2937;
      --card:#0f1626; --shadow:0 1px 2px rgba(0,0,0,.35);
      --link:#8ab4f8; --chip:#111827;
      --code:#050814; --codefg:#e5e7eb;
      --ok:#22c55e; --warn:#f87171; --info:#60a5fa;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font:16px/1.85 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
      text-rendering:optimizeLegibility;
    }
    img{max-width:100%;height:auto}
    a{color:var(--link); text-decoration:none}
    a:hover{text-decoration:underline}

    /* Layout alignment: match working posts */
    .wrap{max-width:1200px;margin:0 auto;padding:18px 16px 70px}
    .topbar{
      position:sticky; top:0; z-index:10;
      background:color-mix(in srgb,var(--bg) 92%,transparent);
      backdrop-filter:blur(10px);
      border-bottom:1px solid var(--line);
    }
    .topbar .inner{
      max-width:1200px; margin:0 auto; padding:12px 16px;
      display:flex; gap:14px; align-items:center;
    }
    .brand{min-width:200px;display:flex;flex-direction:column;line-height:1.1}
    .brand b{font-size:16px}
    .brand span{font-size:12px;color:var(--muted);margin-top:3px}
    .searchbar{flex:1;display:flex;justify-content:flex-end}
    .searchWrap{position:relative;width:min(640px,100%)}
    .searchWrap input{
      width:100%; padding:12px 14px 12px 40px;
      border:1px solid var(--line);
      border-radius:18px;
      background:var(--bg); color:var(--fg);
      outline:none;
    }
    .searchWrap input:focus{border-color:color-mix(in srgb,var(--link) 50%, var(--line))}
    .searchWrap svg{position:absolute;left:14px;top:50%;transform:translateY(-50%);opacity:.55}
    .btn{
      border:1px solid var(--line); background:var(--card); color:var(--fg);
      padding:10px 14px; border-radius:16px; cursor:pointer;
      box-shadow:0 1px 2px rgba(0,0,0,.06);
      font-size:13px;
      white-space:nowrap;
    }

    .crumbs{
      margin-top:16px; font-size:13px; color:var(--muted);
      display:flex; gap:8px; flex-wrap:wrap; align-items:center;
    }

    .grid{display:grid; gap:16px; margin-top:16px; align-items:start}
    @media(min-width:980px){
      .grid{grid-template-columns:2.3fr 0.9fr}
    }
    .card{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:18px;
      padding:22px;
      box-shadow:var(--shadow);
      overflow:hidden; /* avoids inner overflow causing “border mismatch” feel */
    }

    h1{font-size:40px; line-height:1.1; margin:10px 0 10px; letter-spacing:-0.02em}
    h2{font-size:24px; margin:34px 0 12px; letter-spacing:-0.01em}
    h3{font-size:18px; margin:22px 0 10px}
    p{margin:12px 0}
    ul{margin:12px 0 12px 18px}
    ol{margin:12px 0 12px 18px}
    li{margin:6px 0}
    .subhead{margin:0 0 10px;font-size:16px;color:var(--muted)}
    .lede{margin:0 0 14px;font-size:16px;color:var(--muted)}
    pre{
      background:var(--code); color:var(--codefg);
      padding:14px; border-radius:14px; overflow:auto;
      border:1px solid rgba(255,255,255,.06);
    }
    code{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}

    .meta{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      color:var(--muted); font-size:13px; margin:0 0 10px;
    }
    .dot{opacity:.8}

    .tagsInline{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
    .tag{
      border:1px solid var(--line);
      padding:7px 12px;border-radius:999px;
      font-size:13px;color:var(--muted);
      background:color-mix(in srgb, var(--chip) 92%, transparent);
    }

    .tocNav{display:flex;flex-direction:column;gap:6px;margin-top:12px}
    .tocNav a{
      font-size:13px;color:var(--muted);
      padding:8px 10px;border-radius:10px;
      text-decoration:none; line-height:1.35;
    }
    .tocNav a:hover{background:var(--chip);color:var(--fg)}
    .toc-h3{padding-left:18px;font-size:12px;opacity:.95}

    .adSlot{
      margin-top:14px;
      min-height:520px;
      border:1px dashed var(--line);
      border-radius:16px;
      display:flex;align-items:center;justify-content:center;
      color:var(--muted);text-align:center;
      padding:12px;
      background:color-mix(in srgb, var(--bg) 92%, transparent);
    }

    .callout{
      border-left:5px solid var(--info);
      padding:14px 14px 14px 14px;
      background:var(--chip);
      border-radius:14px;
      margin:16px 0;
    }
    .ok{
      border-left:5px solid var(--ok);
      padding:14px;
      background:color-mix(in srgb, var(--ok) 10%, var(--chip));
      border-radius:14px;
      margin:16px 0;
    }
    .warn{
      border-left:5px solid var(--warn);
      padding:14px;
      background:color-mix(in srgb, var(--warn) 10%, var(--chip));
      border-radius:14px;
      margin:16px 0;
    }
    .kicker{
      display:inline-flex;align-items:center;gap:8px;
      font-size:12px;color:var(--muted);
      border:1px solid var(--line);
      padding:6px 10px;border-radius:999px;
      background:color-mix(in srgb, var(--chip) 92%, transparent);
      margin:8px 0 0;
    }

    .twoCol{
      display:grid; gap:12px; margin:12px 0;
    }
    @media(min-width:760px){
      .twoCol{grid-template-columns:1fr 1fr}
    }
    .miniCard{
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px;
      background:color-mix(in srgb, var(--card) 92%, transparent);
    }
    .miniCard b{display:block;margin-bottom:6px}
    .miniCard p{margin:8px 0;color:var(--muted);font-size:14px}

    .relatedGrid{display:grid;gap:12px;margin-top:12px}
    @media(min-width:720px){ .relatedGrid{grid-template-columns:1fr 1fr} }
    .relatedItem{
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px;
      background:color-mix(in srgb, var(--card) 92%, transparent);
    }
    .relatedItem b{display:block;margin-bottom:6px;font-size:14px}
    .relatedItem span{color:var(--muted);font-size:12px}

    footer{
      margin-top:30px;border-top:1px solid var(--line);
      padding-top:14px;font-size:12px;color:var(--muted);
      display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;
    }
    .footRight{margin-left:auto;display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .footRight a{color:var(--muted)}
    .footRight a:hover{color:var(--fg); text-decoration:none}

    /* Better anchor scrolling with sticky topbar */
    :target{scroll-margin-top:92px}
  </style>
</head>

<body>
  <div class="topbar">
    <div class="inner">
      <div class="brand">
        <a href="/" aria-label="BitDark Home">BitDark</a>
        <span><a href="/blog/">Blog</a></span>
      </div>

      <div class="searchbar" role="search">
        <form class="searchWrap" action="/blog/" method="GET">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M21 21l-4.35-4.35m1.85-5.15a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
          </svg>
          <input name="q" id="qTop" placeholder="Search blog…" autocomplete="off">
        </form>
      </div>

      <button class="btn" id="themeBtn" type="button">Theme</button>
    </div>
  </div>

  <div class="wrap">
    <div class="crumbs" aria-label="Breadcrumbs">
      <a href="/">Home</a>
      <span>›</span>
      <a href="/blog/">Blog</a>
      <span>›</span>
      <span id="crumbTitle">“Your Session Expired” Scams</span>
    </div>

    <div class="grid">
      <article class="card" id="article">
        <h1 id="postTitle">“Your Session Expired” Scams: How to Tell Fake Login Pages Instantly</h1>
        <p class="subhead"><b>A domain-first, privacy-first checklist to detect fake login pages before you type anything</b></p>
        <p class="lede">(Works for Google, Microsoft, Apple ID, banks, delivery SMS, WhatsApp forwards, and “verify now” popups)</p>

        <div class="meta" aria-label="Post metadata">
          <span>Updated: <time id="updatedTime" datetime="2025-12-27">Dec 27, 2025</time></span>
          <span class="dot">•</span>
          <span>Category: <b id="postCategory">Safe-Link Tips</b></span>
          <span class="dot">•</span>
          <span>Read time: <span id="readTime">~10–14 min</span></span>
        </div>

        <div class="tagsInline" aria-label="Tags">
          <span class="tag">Fake Login</span>
          <span class="tag">Session Expired</span>
          <span class="tag">Domain Check</span>
          <span class="tag">2FA</span>
          <span class="tag">Passkeys</span>
          <span class="tag">Privacy-First</span>
          <span class="tag">Client-Only</span>
        </div>

        <div class="ok">
          <b>Fast Answer (featured-snippet style)</b>
          <p style="margin:10px 0 0">
            A real “session expired” event usually happens <b>inside an app you already opened</b>, and it sends you to the
            <b>same official domain</b>. A fake “session expired” scam pushes you to a look-alike login page from
            <b>a different domain</b>, often via SMS/WhatsApp/email. If the domain is wrong, <b>stop</b>—don’t type anything.
          </p>
          <p class="kicker" aria-hidden="true">Rule: domain first, urgency last.</p>
        </div>

        <h2>Why “Session Expired” Works (Even on Smart People)</h2>
        <p>
          “Session expired” is the perfect psychological trap because it feels normal. Sessions do expire. Apps do log you out.
          Attackers exploit that familiarity—and pair it with urgency:
          <i>“Verify now”</i>, <i>“Account locked”</i>, <i>“Unusual sign-in”</i>, <i>“Payment failed”</i>.
        </p>
        <p>
          The goal is simple: get you to type your password (and often an OTP) into a fake page before your brain switches
          from “tap fast” to “think carefully.”
        </p>

        <h2>What a Real Session Expiry Actually Looks Like</h2>
        <div class="twoCol">
          <div class="miniCard">
            <b>Real</b>
            <ul>
              <li>Happens inside a site/app you were already using</li>
              <li>Redirects to the official domain you expect</li>
              <li>Often works even if you ignore the message and reopen the app</li>
              <li>Doesn’t demand OTP “to continue viewing” a random page</li>
            </ul>
          </div>
          <div class="miniCard">
            <b>Fake</b>
            <ul>
              <li>Arrives via SMS/WhatsApp/email with urgency</li>
              <li>Sends you to a new domain you didn’t choose</li>
              <li>Login form appears instantly (no normal app flow)</li>
              <li>May ask OTP immediately or show “processing…” after submit</li>
            </ul>
          </div>
        </div>

        <h2>7 Instant Checks to Spot a Fake Login Page</h2>

        <h3>1) Domain check (the only test that really matters)</h3>
        <p>
          Ignore logos. Ignore page design. Ignore “https.” Look at the domain.
          Attackers can copy the entire page, but they can’t legally operate under the real domain.
        </p>
        <div class="callout">
          <b>BitDark habit:</b>
          <ul>
            <li>Read the <b>last two parts</b> of the domain (the “registrable domain”).</li>
            <li>Example: <code>accounts.google.com</code> → registrable domain is <code>google.com</code>.</li>
            <li>Example: <code>google.account-security-login.com</code> → registrable domain is <code>account-security-login.com</code> (not Google).</li>
          </ul>
        </div>

        <h3>2) “Looks secure” is not a signal</h3>
        <p>
          Many scam pages have HTTPS and a lock icon. TLS only means your connection to that site is encrypted—
          it does not mean the site is legitimate.
        </p>

        <h3>3) Look for subdomain tricks</h3>
        <p>
          Attackers often bury the brand name in a subdomain to fool quick glances:
        </p>
        <pre><code>secure-google.com.example-login[.]site
microsoft.verify.session-expired[.]online
icici-login[.]help (not icicibank.com)
hdfc-reverify[.]top (not hdfcbank.com)</code></pre>
        <div class="warn">
          <b>Rule:</b> The brand name inside the URL is meaningless. Only the real registrable domain matters.
        </div>

        <h3>4) URL paths that scream “template scam”</h3>
        <p>
          Many fake pages reuse the same path patterns:
        </p>
        <pre><code>/login.php
/verify.php
/session/expired
/auth/continue
/secure/confirm
/otp/submit</code></pre>
        <p>
          Real services can use any path too—but when you combine “session expired” + random domain + template path,
          the probability becomes very high.
        </p>

        <h3>5) Form behavior red flags</h3>
        <ul>
          <li>Asks for <b>password + OTP</b> in the same flow unusually fast</li>
          <li>Shows “Verifying…” spinner longer than normal</li>
          <li>After submit, it <b>reloads the same page</b> or shows generic “error try again”</li>
          <li>Asks for PIN, CVV, or full card details to “restore session”</li>
        </ul>
        <div class="warn">
          <b>Hard stop:</b> No legitimate session fix requires CVV or PIN “to continue.”
        </div>

        <h3>6) “One message, one link” urgency pattern</h3>
        <p>
          Scam messages are designed to be acted on immediately. They rarely say:
          “Open your app and check notifications.” They say: “Tap here now.”
        </p>

        <h3>7) If you didn’t initiate it, treat it as hostile</h3>
        <p>
          If you were not actively logging in, resetting a password, or verifying a device, you don’t owe the message
          any action. Go to the site/app manually instead.
        </p>

        <h2>Real-World Examples (What These Scams Usually Look Like)</h2>
        <p>
          Below are safe, representative examples (not live scam URLs). These patterns are what you’ll typically see
          in SMS/WhatsApp/email.
        </p>

        <h3>Example A: “Google session expired” email/WhatsApp bait</h3>
        <pre><code>Subject: Google Security Alert: Session Expired
Message: Your session expired due to unusual activity. Verify to restore access:
https://google.account-security-help[.]site/login</code></pre>
        <div class="ok">
          <b>Instant decision:</b> That’s not <code>google.com</code>. Delete.
        </div>

        <h3>Example B: Bank “session expired / KYC pending” SMS bait</h3>
        <pre><code>SMS: Your NetBanking session expired. Re-activate now to avoid account freeze:
https://hdfc-kyc-session[.]online/verify</code></pre>
        <div class="warn">
          <b>Instant decision:</b> Not the official bank domain. Do not open. Open your bank app directly.
        </div>

        <h3>Example C: Delivery/parcel “session expired” redirect bait</h3>
        <pre><code>WhatsApp: Delivery failed. Session expired. Update address to re-schedule:
https://ship-track-support[.]top/continue</code></pre>
        <p>
          These often lead to fake pages that harvest phone + OTP or card details for “₹25 reschedule fee.”
        </p>

        <h2>Mobile vs Desktop: Why This Scam Hits Harder on Phones</h2>
        <ul>
          <li>Mobile browsers hide the full address bar until you tap it</li>
          <li>No hover preview of links</li>
          <li>Messaging apps show only blue text, not domains</li>
          <li>Keyboard focus makes you “continue” without thinking</li>
        </ul>

        <div class="callout">
          <b>Mobile micro-habit:</b> When a login page opens, tap the address bar once. Read the domain out loud.
          If it’s not the official domain you expect, close the tab.
        </div>

        <h2>What To Do Instead (Safe Workflow That Never Fails)</h2>
        <ol>
          <li><b>Do not use the link</b> from SMS/WhatsApp/email.</li>
          <li><b>Open the app</b> (Google/Bank/Delivery) from your home screen, or type the official domain yourself.</li>
          <li>Check notifications/security alerts inside the app/account page.</li>
          <li>If worried, change password from the official site, then review recent sessions/devices.</li>
        </ol>

        <div class="ok">
          <b>Why this works:</b> Scammers control the link. They don’t control your official app icon or your typed domain.
        </div>

        <h2>If You Already Entered Your Password (Do This Now)</h2>
        <div class="warn">
          <b>Don’t panic — act fast.</b>
          <ol>
            <li>Change your password immediately from the official site/app (not the link).</li>
            <li>Sign out of other sessions/devices (security settings).</li>
            <li>Enable 2FA/passkeys if available.</li>
            <li>If you entered OTP too, assume account takeover risk and check recovery email/phone changes.</li>
            <li>For bank/UPI: call official support from the app/website (not numbers in messages) and monitor transactions.</li>
          </ol>
        </div>

        <h2>How Passkeys & 2FA Change the Game (But Don’t Make You Immune)</h2>
        <p>
          Passkeys are excellent because they’re resistant to many credential-phishing attacks. But:
        </p>
        <ul>
          <li>Some services still fall back to passwords</li>
          <li>Attackers can push “approve” prompts (MFA fatigue) if you’re distracted</li>
          <li>Fake pages can still steal phone numbers, recovery details, or trick you into installing apps</li>
        </ul>
        <div class="ok">
          <b>Best combo:</b> passkeys + device hygiene + domain-first habit.
        </div>

        <h2>FAQ</h2>

        <h3>Is the lock icon enough to trust a login page?</h3>
        <p>No. HTTPS only secures the connection. A scam site can also have HTTPS.</p>

        <h3>What if the page looks exactly like Google/Microsoft/Bank?</h3>
        <p>Design can be copied perfectly. Domain cannot. Always verify the domain.</p>

        <h3>Why do scammers use “session expired” instead of “password needed”?</h3>
        <p>Because it feels normal, urgent, and it makes you think you’re restoring something you already had.</p>

        <h3>Can I check a link safely without opening it?</h3>
        <p>
          Yes: read the domain inside the URL first. If it’s short/hidden, expand it carefully and confirm the final domain
          before loading any page.
        </p>

        <h2>Quick Summary (Save This)</h2>
        <div class="ok">
          <ul>
            <li><b>Real session expiry</b> happens inside apps you already opened. <b>Fake ones</b> arrive via messages.</li>
            <li><b>Ignore HTTPS + logos.</b> Check the <b>domain</b> first.</li>
            <li>Brand name in a subdomain means nothing. Focus on the registrable domain.</li>
            <li>If you didn’t initiate it, don’t authenticate through a link.</li>
            <li>If you entered details, change password + revoke sessions immediately.</li>
          </ul>
        </div>

        <h2>Related articles</h2>
        <div class="relatedGrid">
          <div class="relatedItem">
            <b><a href="/blog/how-to-check-a-short-links-real-destination-without-opening-it/">How to Check a Short Link’s Real Destination (Without Opening It)</a></b>
            <span>Safe-Link Tips • Expand short links safely and verify final domain</span>
          </div>
          <div class="relatedItem">
            <b><a href="/blog/how-to-spot-a-suspicious-link-without-uploading-it-anywhere/">How to Check if a Link Is Safe — Without Clicking or Uploading It</a></b>
            <span>Safe-Link Tips • A privacy-first, client-only link inspection workflow</span>
          </div>
          <div class="relatedItem">
            <b><a href="/blog/how-to-detect-tracking-links-in-sms-whatsapp-utm-click-ids-ref-tags/">How to Detect Tracking Links in SMS &amp; WhatsApp (UTM, Click IDs, Ref Tags)</a></b>
            <span>Safe-Link Tips • Spot trackers and clean URLs safely</span>
          </div>
          <div class="relatedItem">
            <b><a href="/blog/">Browse all posts</a></b>
            <span>Blog • Search by keywords, tags and categories</span>
          </div>
        </div>
      </article>

      <aside class="card" aria-label="Sidebar">
        <b>On this page</b>
        <nav id="toc" class="tocNav" aria-label="Table of contents"></nav>

        <div class="adSlot">
          Future AdSense / widgets<br>
          (Reserved space)
        </div>
      </aside>
    </div>

    <footer>
      <div>© <span id="year"></span> BitDark.NET</div>
      <div class="footRight">
        <a href="/blog/">Blog</a>
        <a href="/about.html">About</a>
        <a href="/privacy.html">Privacy</a>
        <a href="/terms.html">Terms</a>
        <a href="/faq.html">FAQ</a>
      </div>
    </footer>
  </div>

  <script>
    (() => {
      const root = document.documentElement;
      const saved = localStorage.getItem("bd_blog_theme");
      if (saved === "dark" || saved === "light") root.setAttribute("data-theme", saved);

      document.getElementById("themeBtn")?.addEventListener("click", () => {
        const cur = root.getAttribute("data-theme") || "light";
        const next = cur === "dark" ? "light" : "dark";
        root.setAttribute("data-theme", next);
        localStorage.setItem("bd_blog_theme", next);
      });

      document.getElementById("year").textContent = new Date().getFullYear();

      const title = (document.getElementById("postTitle")?.textContent || "Post").trim();
      const crumb = document.getElementById("crumbTitle");
      if (crumb) crumb.textContent = title;

      const cat = document.querySelector("meta[name='bd:category']")?.content?.trim();
      if (cat) {
        const el = document.getElementById("postCategory");
        if (el) el.textContent = cat;
      }

      const upd = document.querySelector("meta[name='bd:updated']")?.content?.trim();
      if (upd) {
        const t = document.getElementById("updatedTime");
        if (t) {
          t.setAttribute("datetime", upd);
          const dt = new Date(upd + "T00:00:00");
          const pretty = dt.toLocaleDateString(undefined, { year:"numeric", month:"short", day:"2-digit" });
          t.textContent = pretty;
        }
      }

      const params = new URLSearchParams(location.search);
      const q = params.get("q");
      if (q && document.getElementById("qTop")) document.getElementById("qTop").value = q;
    })();

    (() => {
      const article = document.getElementById("article");
      const out = document.getElementById("readTime");
      if (!article || !out) return;

      const text = (article.innerText || "").replace(/\s+/g, " ").trim();
      const words = text ? text.split(" ").length : 0;

      const wpmFast = 260;
      const wpmSlow = 220;
      const minFast = Math.max(1, Math.ceil(words / wpmFast));
      const minSlow = Math.max(1, Math.ceil(words / wpmSlow));

      out.textContent = `~${minFast}–${minSlow} min`;
    })();

    (() => {
      const toc = document.getElementById("toc");
      const article = document.getElementById("article");
      if (!toc || !article) return;

      const headings = article.querySelectorAll("h2, h3");
      if (!headings.length) {
        toc.innerHTML = "<span style='color:var(--muted);font-size:13px'>No sections</span>";
        return;
      }

      const slugify = (s) => (s || "")
        .toLowerCase()
        .trim()
        .replace(/[^\p{L}\p{N}\s-]/gu, "")
        .replace(/\s+/g, "-")
        .replace(/-+/g, "-")
        .slice(0, 70);

      const used = new Set();

      headings.forEach((h) => {
        if (!h.id) {
          let id = slugify(h.textContent);
          if (!id) id = "section";
          let n = 2;
          while (used.has(id) || document.getElementById(id)) {
            id = `${slugify(h.textContent)}-${n++}`;
          }
          h.id = id;
          used.add(id);
        }

        const a = document.createElement("a");
        a.href = `#${h.id}`;
        a.textContent = h.textContent.trim();
        if (h.tagName === "H3") a.classList.add("toc-h3");

        a.addEventListener("click", (e) => {
          e.preventDefault();
          document.getElementById(h.id).scrollIntoView({ behavior: "smooth", block: "start" });
          history.replaceState(null, "", `#${h.id}`);
        });

        toc.appendChild(a);
      });
    })();
  </script>
</body>
</html>
